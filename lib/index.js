!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).rkst={})}(this,(function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return u}function o(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e}var r,i={methods:"GET",url:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeOut:1e4,allowCode:200,withCredentials:!1};e.ContentType=void 0,(r=e.ContentType||(e.ContentType={})).URL_ENCODED="application/x-www-form-urlencoded",r.TEXT_PLAIN="text/plain",r.TEXT_HTML="text/html",r.APPLICATION_JSON="application/json",r.APPLICATION_XML="application/xml",r.APPLICATION_JAVASCRIPT="application/javascript";var u=l((function(e){return e.includes("?")?"&":"?"})),a=l((function(e,t){void 0===t&&(t={});return Reflect.ownKeys(t).reduce((function(e,n){return""+e+u(e)+n+"="+Reflect.get(t,n)}),e||"")}));function l(e){var t={};function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var u=JSON.stringify(Array.from(r)),a=t[u];return a||(t[u]=e.apply(void 0,o([],n(r))))}return r.cache=t,r}var d,s=function(t,n,o){var r,u,l=t;return"function"==typeof n&&(l=Object.assign({},n(l))),!(null===(r=(l=Object.assign({},i,l)).url)||void 0===r?void 0:r.includes("//"))&&(null==l?void 0:l.baseUrl)&&(l.url=l.baseUrl+l.url),(null===(u=l.headers)||void 0===u?void 0:u["Content-Type"])===e.ContentType.URL_ENCODED&&(l.url=a(l.url,l.body)),new Promise((function(e,t){var n=new XMLHttpRequest;n.timeout=l.timeOut||1e4,n.withCredentials=l.withCredentials||!1,n.open(l.methods,l.url),Object.keys(l.headers||{}).forEach((function(e){n.setRequestHeader(e,Reflect.get(l.headers||{},e))})),n.send(JSON.stringify(l.body)),n.onreadystatechange=function(){var r=[l.allowCode].flat(1/0);if(4===n.readyState){var i=r.some((function(e){return e===n.status}))?e:t,u=JSON.parse(n.responseText);"function"==typeof o&&(u=o(u)),i(u)}}}))};s.get=function(e,t){return void 0===t&&(t={}),s({url:e,methods:"get",headers:t})},s.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),s({url:e,methods:"post",body:t,headers:n})},s.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),s({url:e,methods:"post",body:t,headers:n})},s.delete=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),s({url:e,methods:"post",body:t,headers:n})},e.Methods=void 0,(d=e.Methods||(e.Methods={})).GET="get",d.POST="post",d.PUT="put",d.DELETE="delete",e.configureRkst=function(e){return void 0===e&&(e={}),function(n){return s(t(t({},e.options||{}),n),null==e?void 0:e.before,null==e?void 0:e.after)}},e.default=s,Object.defineProperty(e,"__esModule",{value:!0})}));
