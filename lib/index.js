!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).rkst={})}(this,(function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function r(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var o={methods:"GET",url:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeOut:1e4,allowCode:200,withCredentials:!1},i=f((function(e){return e.includes("?")?"&":"?"})),u=f((function(e,t){void 0===t&&(t={});return Reflect.ownKeys(t).reduce((function(e,n){return""+e+i(e)+n+"="+Reflect.get(t,n)}),e||"")}));function f(e){var t={};function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=JSON.stringify(Array.from(o)),f=t[u];return f||(t[u]=e.apply(void 0,r([],n(o))))}return o.cache=t,o}function a(e,t,n){var r,i=e;return"function"==typeof t&&(i=Object.assign({},t(i))),"application/x-www-form-urlencoded"===(null===(r=(i=Object.assign({},o,i)).headers)||void 0===r?void 0:r["Content-Type"])&&(i.url=u(i.url,i.body)),new Promise((function(e,t){var r=new XMLHttpRequest;r.timeout=i.timeOut||1e4,r.withCredentials=i.withCredentials||!1,r.open(i.methods,i.url),Object.keys(i.headers||{}).forEach((function(e){r.setRequestHeader(e,Reflect.get(i.headers||{},e))})),r.send(JSON.stringify(i.body)),r.onreadystatechange=function(){var o=[i.allowCode].flat(1/0);if(4===r.readyState){var u=o.some((function(e){return e===r.status}))?e:t,f=JSON.parse(r.responseText);"function"==typeof n&&(f=n(f)),u(f)}}}))}e.configureRkst=function(e){return void 0===e&&(e={}),function(n){return a(t(t({},e.options||{}),n),null==e?void 0:e.before,null==e?void 0:e.after)}},e.default=a,Object.defineProperty(e,"__esModule",{value:!0})}));
