var e,t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u}function n(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}!function(e){e.URL_ENCODED="application/x-www-form-urlencoded",e.TEXT_PLAIN="text/plain",e.TEXT_HTML="text/html",e.APPLICATION_JSON="application/json",e.APPLICATION_XML="application/xml",e.APPLICATION_JAVASCRIPT="application/javascript"}(e||(e={}));var o={methods:"GET",url:"",headers:{"Content-Type":e.URL_ENCODED},timeOut:1e4,allowCode:200,withCredentials:!1},i=a((function(e){return e.includes("?")?"&":"?"})),u=a((function(e,t){void 0===t&&(t={});return Reflect.ownKeys(t).reduce((function(e,r){return""+e+i(e)+r+"="+Reflect.get(t,r)}),e||"")}));function a(e){var t={};function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=JSON.stringify(Array.from(o)),a=t[u];return a||(t[u]=e.apply(void 0,n([],r(o))))}return o.cache=t,o}var l,d=function(t,r,n){var i,a,l=t;return"function"==typeof r&&(l=Object.assign({},r(l))),!(null===(i=(l=Object.assign({},o,l)).url)||void 0===i?void 0:i.includes("//"))&&(null==l?void 0:l.baseUrl)&&(l.url=l.baseUrl+l.url),(null===(a=l.headers)||void 0===a?void 0:a["Content-Type"])===e.URL_ENCODED&&(l.url=u(l.url,l.body)),new Promise((function(e,t){var r=new XMLHttpRequest;r.timeout=l.timeOut||1e4,r.withCredentials=l.withCredentials||!1,r.open(l.methods,l.url),Object.keys(l.headers||{}).forEach((function(e){r.setRequestHeader(e,Reflect.get(l.headers||{},e))})),r.send(JSON.stringify(l.body)),r.onreadystatechange=function(){var o=[l.allowCode].flat(1/0);if(4===r.readyState){var i=o.some((function(e){return e===r.status}))?e:t,u=JSON.parse(r.responseText);"function"==typeof n&&(u=n(u)),i(u)}}}))};function s(e){return void 0===e&&(e={}),function(r){return d(t(t({},e.options||{}),r),null==e?void 0:e.before,null==e?void 0:e.after)}}d.get=function(e,t){return void 0===t&&(t={}),d({url:e,methods:"get",headers:t})},d.post=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),d({url:e,methods:"post",body:t,headers:r})},d.put=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),d({url:e,methods:"post",body:t,headers:r})},d.delete=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),d({url:e,methods:"post",body:t,headers:r})},function(e){e.GET="get",e.POST="post",e.PUT="put",e.DELETE="delete"}(l||(l={}));export default d;export{e as ContentType,l as Methods,s as configureRkst};
