var e,t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function r(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}!function(e){e.URL_ENCODED="application/x-www-form-urlencoded",e.TEXT_PLAIN="text/plain",e.TEXT_HTML="text/html",e.APPLICATION_JSON="application/json",e.APPLICATION_XML="application/xml",e.APPLICATION_JAVASCRIPT="application/javascript"}(e||(e={}));var o,i={methods:"GET",url:"",headers:{"Content-Type":e.URL_ENCODED},timeOut:1e4,allowCode:200,withCredentials:!1},a=l((function(e){return e.includes("?")?"&":"?"})),u=l((function(e,t){void 0===t&&(t={});return Reflect.ownKeys(t).reduce((function(e,n){return""+e+a(e)+n+"="+Reflect.get(t,n)}),e||"")}));function l(e){var t={};function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=JSON.stringify(Array.from(o)),u=t[a];return u||(t[a]=e.apply(void 0,r([],n(o))))}return o.cache=t,o}function c(t,n,r){var o,a,l=t;return"function"==typeof n&&(l=Object.assign({},n(l))),!(null===(o=(l=Object.assign({},i,l)).url)||void 0===o?void 0:o.includes("//"))&&(null==l?void 0:l.baseUrl)&&(l.url=l.baseUrl+l.url),(null===(a=l.headers)||void 0===a?void 0:a["Content-Type"])===e.URL_ENCODED&&(l.url=u(l.url,l.body)),new Promise((function(e,t){var n=new XMLHttpRequest;n.timeout=l.timeOut||1e4,n.withCredentials=l.withCredentials||!1,n.open(l.methods,l.url),Object.keys(l.headers||{}).forEach((function(e){n.setRequestHeader(e,Reflect.get(l.headers||{},e))})),n.send(JSON.stringify(l.body)),n.onreadystatechange=function(){var o=[l.allowCode].flat(1/0);if(4===n.readyState){var i=o.some((function(e){return e===n.status}))?e:t,a=JSON.parse(n.responseText);"function"==typeof r&&(a=r(a)),i(a)}}}))}function f(e){return void 0===e&&(e={}),function(n){return c(t(t({},e.options||{}),n),null==e?void 0:e.before,null==e?void 0:e.after)}}!function(e){e.GET="get",e.POST="post",e.PUT="put",e.DELETE="delete"}(o||(o={}));export default c;export{e as ContentType,o as Methods,f as configureRkst};
