var t,e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function n(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function r(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}!function(t){t.URL_ENCODED="application/x-www-form-urlencoded",t.TEXT_PLAIN="text/plain",t.TEXT_HTML="text/html",t.APPLICATION_JSON="application/json",t.APPLICATION_XML="application/xml",t.APPLICATION_JAVASCRIPT="application/javascript"}(t||(t={}));var o={methods:"GET",url:"",headers:{"Content-Type":t.URL_ENCODED},timeOut:1e4,allowCode:200,withCredentials:!1},i=a((function(t){return t.includes("?")?"&":"?"})),u=a((function(t,e){void 0===e&&(e={});return Reflect.ownKeys(e).reduce((function(t,n){return""+t+i(t)+n+"="+Reflect.get(e,n)}),t||"")}));function a(t){var e={};function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=JSON.stringify(Array.from(o)),a=e[u];return a||(e[u]=t.apply(void 0,r([],n(o))))}return o.cache=e,o}var l,d=function(e,n,r){var i,a,l=e;return"function"==typeof n&&(l=Object.assign({},n(l))),!(null===(i=(l=Object.assign({},o,l)).url)||void 0===i?void 0:i.includes("//"))&&(null==l?void 0:l.baseUrl)&&(l.url=l.baseUrl+l.url),(null===(a=l.headers)||void 0===a?void 0:a["Content-Type"])===t.URL_ENCODED&&(l.url=u(l.url,l.body)),new Promise((function(t,e){var n=new XMLHttpRequest;n.timeout=l.timeOut||1e4,n.withCredentials=l.withCredentials||!1,n.open(l.methods,l.url),Object.keys(l.headers||{}).forEach((function(t){n.setRequestHeader(t,Reflect.get(l.headers||{},t))})),n.send(JSON.stringify(l.body)),n.onreadystatechange=function(){var o=[l.allowCode].flat(1/0);if(4===n.readyState){var i=o.some((function(t){return t===n.status}))?t:e,u=JSON.parse(n.responseText);"function"==typeof r&&(u=r(u)),i(u)}}}))};function s(t){var n;void 0===t&&(t={});var r=(null===(n=t.options)||void 0===n?void 0:n.baseUrl)||"";function o(n){return d(e(e({},t.options||{}),n),null==t?void 0:t.before,null==t?void 0:t.after)}return o.get=function(t,e){return d.get(r+t,e)},o.post=function(t,e,n){return d.post(r+t,e,n)},o}d.get=function(t,e){return void 0===e&&(e={}),d({url:t,methods:"get",headers:e})},d.post=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),d({url:t,methods:"post",body:e,headers:n})},d.put=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),d({url:t,methods:"post",body:e,headers:n})},d.delete=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),d({url:t,methods:"post",body:e,headers:n})},function(t){t.GET="get",t.POST="post",t.PUT="put",t.DELETE="delete"}(l||(l={}));export default d;export{t as ContentType,l as Methods,s as configureRkst};
