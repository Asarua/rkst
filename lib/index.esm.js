var t,e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function n(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function r(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}!function(t){t.URL_ENCODED="application/x-www-form-urlencoded",t.TEXT_PLAIN="text/plain",t.TEXT_HTML="text/html",t.APPLICATION_JSON="application/json",t.APPLICATION_XML="application/xml",t.APPLICATION_JAVASCRIPT="application/javascript"}(t||(t={}));var o,i={methods:"GET",url:"",headers:{"Content-Type":t.URL_ENCODED},timeOut:1e4,allowCode:200,withCredentials:!1},a=l((function(t){return t.includes("?")?"&":"?"})),u=l((function(t,e){void 0===e&&(e={});return Reflect.ownKeys(e).reduce((function(t,n){return""+t+a(t)+n+"="+Reflect.get(e,n)}),t||"")}));function l(t){var e={};function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=JSON.stringify(Array.from(o)),u=e[a];return u||(e[a]=t.apply(void 0,r([],n(o))))}return o.cache=e,o}function c(e,n,r){var o,a=e;return"function"==typeof n&&(a=Object.assign({},n(a))),(null===(o=(a=Object.assign({},i,a)).headers)||void 0===o?void 0:o["Content-Type"])===t.URL_ENCODED&&(a.url=u(a.url,a.body)),new Promise((function(t,e){var n=new XMLHttpRequest;n.timeout=a.timeOut||1e4,n.withCredentials=a.withCredentials||!1,n.open(a.methods,a.url),Object.keys(a.headers||{}).forEach((function(t){n.setRequestHeader(t,Reflect.get(a.headers||{},t))})),n.send(JSON.stringify(a.body)),n.onreadystatechange=function(){var o=[a.allowCode].flat(1/0);if(4===n.readyState){var i=o.some((function(t){return t===n.status}))?t:e,u=JSON.parse(n.responseText);"function"==typeof r&&(u=r(u)),i(u)}}}))}function f(t){return void 0===t&&(t={}),function(n){return c(e(e({},t.options||{}),n),null==t?void 0:t.before,null==t?void 0:t.after)}}!function(t){t.GET="get",t.POST="post",t.PUT="put",t.DELETE="delete"}(o||(o={}));export default c;export{t as ContentType,o as Methods,f as configureRkst};
