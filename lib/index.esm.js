var e=function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function t(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function r(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}var n={methods:"GET",url:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeOut:1e4,allowCode:200,withCredentials:!1},o=a((function(e){return e.includes("?")?"&":"?"})),i=a((function(e,t){void 0===t&&(t={});return Reflect.ownKeys(t).reduce((function(e,r){return""+e+o(e)+r+"="+Reflect.get(t,r)}),e||"")}));function a(e){var n={};function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=JSON.stringify(Array.from(o)),u=n[a];return u||(n[a]=e.apply(void 0,r([],t(o))))}return o.cache=n,o}function u(e,t,r){var o,a=e;return"function"==typeof t&&(a=Object.assign({},t(a))),"application/x-www-form-urlencoded"===(null===(o=(a=Object.assign({},n,a)).headers)||void 0===o?void 0:o["Content-Type"])&&(a.url=i(a.url,a.body)),new Promise((function(e,t){var n=new XMLHttpRequest;n.timeout=a.timeOut||1e4,n.withCredentials=a.withCredentials||!1,n.open(a.methods,a.url),Object.keys(a.headers||{}).forEach((function(e){n.setRequestHeader(e,Reflect.get(a.headers||{},e))})),n.send(JSON.stringify(a.body)),n.onreadystatechange=function(){var o=[a.allowCode].flat(1/0);if(4===n.readyState){var i=o.some((function(e){return e===n.status}))?e:t,u=JSON.parse(n.responseText);"function"==typeof r&&(u=r(u)),i(u)}}}))}function l(t){return void 0===t&&(t={}),function(r){return u(e(e({},t.options||{}),r),null==t?void 0:t.before,null==t?void 0:t.after)}}export default u;export{l as configureRkst};
